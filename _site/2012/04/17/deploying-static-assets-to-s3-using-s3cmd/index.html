<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="description" content="The Easyart Developers Blog">
<meta name="author" content="Easyart">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Deploying static assets to S3 using s3cmd | Easyart Developers</title>

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700">
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lt IE 9]>
<script src="/assets/js/html5.js"></script>
<![endif]-->

</head>

<body>

  <div class="global-header" role="banner">
    <h1><a href="/"><strong>Easyart</strong>Developers</a></h1>
  </div>

  <div class="content row">

    <section class="col-7">
      <div class="content-pri" role="main">

        <article class="hentry">
          <header>
            <h2>Deploying static assets to S3 using s3cmd</h2>
            <p class="updated">Posted on 17 April 2012 by Nick Boyce</p>
          </header>
          <p>I&rsquo;ve been looking at ways to deploy our static assets to S3 as part of our Git workflow.</p>

<p>I want to be able to push to the master branch of a remote repo and have the changes deployed to S3, with predefined HTTP headers. Much like I&rsquo;m used to pushing to Heroku with git push heroku master.</p>

<p>There are probably plenty of ways to do it &ndash; mounting S3 through Fuse, running Webdav servers, using Capistrano etc &ndash; but I found them too overkill for our needs.</p>

<p>So I&rsquo;ve ended up writing a simple deploy script which lives at the root of the repo which uses <a href="http://s3tools.org/s3cmd">s3cmd</a> to sync between the local file system and our S3 bucket. It&rsquo;s a snap to set up, and the result is a command that looks like this:</p>

<script src="https://gist.github.com/2404535.js"> </script>


<p>I store this file in the repo, so that each of us developers can execute it by just calling ./deploy.sh. As this process is outside of the Git workflow, I have to exclude the .git directory. Conveniently, s3cmd&rsquo;s format for excluding files is the same as Git&rsquo;s so you can pass in a .gitignore if you&rsquo;re using one.</p>

<p>It&rsquo;s not a true Git deploy (though it could be called via a <a href="http://progit.org/book/ch7-3.html">Git Hook</a>), but still a pretty neat solution.</p>

        </article>
      </div>    
    </section>

    <aside class="col-4 offset-1">
      <div class="content-sec" role="complementary">
        <div class="widget">
	<h3>Subscribe</h3>
	<p><a href="/feed.xml">Subscribe to the RSS feed</a></p>
</div>

<div class="widget">
  <h3>About this blog</h3>
  <p>This is the blog of the developers at Easyart. We have a strong focus on user-centered design, test-driven development and emerging technologies.</p>
</div>

<div class="widget">
  <h3>Recent posts</h3>
  <ol>
    
    <li><a href="/2013/01/10/links-from-the-week">Links from the week</a></li>
    
    <li><a href="/2013/01/09/using-git-flow">Using git flow</a></li>
    
    <li><a href="/2012/12/20/london-and-github">Is London the most popular city for Github users?</a></li>
    
    <li><a href="/2012/12/19/why-have-i-failed">Why have I failed?</a></li>
    
    <li><a href="/2012/12/13/our-conventions">Conventions</a></li>
    
    <li><a href="/2012/12/07/this-week-on-the-interwebs">This Week On The Interwebs</a></li>
    
    <li><a href="/2012/12/03/a-prediction-for-2013">A prediction for 2013</a></li>
    
    <li><a href="/2012/11/27/working-with-grunt">Working with Grunt</a></li>
    
    <li><a href="/2012/11/22/links-week-46">Links - week 46</a></li>
    
    <li><a href="/2012/11/19/the-breakpoint-podcasts">The breakpoint podcasts</a></li>
    
  </ol>
</div>
      </div>
    </aside>

  </div>

  <footer class="global-footer" role="contentinfo">
    <p>&copy; Copyright 2012 Easyart. All rights reserved.</p>
  </footer>

<script>
// Google analytics
var _gaq=[['_setAccount','UA-204511-23'],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>